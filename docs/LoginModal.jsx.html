<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: LoginModal.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: LoginModal.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { useState, useEffect } from "react";
import db from "../firebaseConfig";


/**
 * Component for login.
 *
 * @component
 */
function LoginModal(props) {

    const [email, setEmail] = useState('');
    const [password, setPassword] = useState('');
    const [passwordError, setPasswordError] = useState('');
    const [emailError, setEmailError] = useState('');
    const [logError, setLogError] = useState(false);
    const [user, setUser] = useState();

/**
 * &lt;Validate form>
 */
    const validate = () => {
        let emailErrorMessage = '';
        let passwordErrorMessage = '';
        if (!email) { emailErrorMessage = 'Please, enter your username.' };
        if (!password) { passwordErrorMessage = 'Please, enter your password.' };
        if (passwordErrorMessage || emailErrorMessage) {
        setEmailError(emailErrorMessage);
        setPasswordError(passwordErrorMessage);
        return false;
        }
        return true;
    };

    const fetchData = async () => {
        let userArray = [];
            try {
                const data = await db.collection('user').get();
                data.docs.map(el => {
                    let user = { ...el.data(), 'id': el.id}
                    userArray.push(user);
                    return  userArray;
                });
              setUser(userArray)
            } catch (e) {
              console.log(e);
            }
    }

    useEffect(() => {
        fetchData()
    }, [])

/**
 * &lt;Handles submission>
 */
  const handleSubmit = (event) => {
      event.preventDefault();
      if (validate()) {
          setEmailError('');
          setPasswordError('');
          const trueUsername = user.map(el => el.username);
          const truePassword = user.map(el => el.password);
          if (trueUsername.toLocaleString() === email &amp;&amp; truePassword.toLocaleString() === password) {
              setLogError(false);
              props.handleResponse('success');
          } else {
              setLogError(true);
          }
        
      };
  };

    return (
                &lt;form onSubmit={handleSubmit}>
                    &lt;div className="input-wrapper">
                        &lt;label htmlFor="email">Email&lt;/label>
                        &lt;input
                            name="username"
                            type="text"
                            id="username"
                            value={email}
                            onChange={(event) => setEmail(event.target.value)}
                        />
                        { emailError ? &lt;div className="form-error">{emailError}&lt;/div> : null  }  
                    &lt;/div>
                    &lt;div className="input-wrapper">
                        &lt;label htmlFor="password">Password&lt;/label>
                        &lt;input
                            name="password"
                            type="password"
                            id="password"
                            value={password}
                            onChange={(event) => setPassword(event.target.value)}
                        />
                        { passwordError ? &lt;div className="form-error">{passwordError}&lt;/div> : null  }  
                    &lt;/div>
                    &lt;button className="sign-in-button" type="submit">Log-In&lt;/button>
                    {logError ? &lt;div className="login-error">Invalid credentials.&lt;/div> : null}
                &lt;/form>
    )
}

export default LoginModal;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="DatePicker.html">DatePicker</a></li><li><a href="Dropdown.html">Dropdown</a></li><li><a href="EmployeeList.html">EmployeeList</a></li><li><a href="HomePage.html">HomePage</a></li><li><a href="LoginModal.html">LoginModal</a></li><li><a href="Modal.html">Modal</a></li><li><a href="UpdateModal.html">UpdateModal</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Tue Nov 09 2021 10:06:03 GMT+0100 (GMT+01:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
